[
    ["\"abc\" & 123", {}, "abc123"],
    ["\"123\" * 2", {}, 246],
    ["[1,2,3] ~ 4", {}, [1,2,3,4]],
    ["123 < \"124\"", {}, true],
    ["\"23\" > 111", {}, false],
    ["abs(\"-2\")", {}, 2],
    ["\"$100\" * 2", {}, 200],
    ["[1,2,3,4][\"1\"]", {}, 2],
    ["1 == \"1\"", {}, false],
    ["\"$123.00\" + 1", {}, 124.00],
    ["a ~ b", {"a": [0,1,2], "b": [3,4,5]}, [0,1,2,3,4,5]],
    ["a ~ b", {"a": [[0,1,2]], "b": [[3,4,5]]}, [[0,1,2],[3,4,5]]],
    ["a[] ~ b[]", {"a": [[0,1,2]], "b": [[3,4,5]]}, [0,1,2,3,4,5]],
    ["a ~ 10", {"a": [0,1,2]}, [0,1,2,10]],
    ["a ~ `null`", {"a": [0,1,2]}, [0,1,2]],
    ["\"truth is \" & `true`", {}, "truth is true"],
    ["[1,2,3] + [2,3,4]", {}, [3,5,7]],
    ["[1,2,3,4] * [1,2,3]", {}, [1,4,9,0]],
    ["[1,2,3,4] & \"%\"", {}, ["1%", "2%", "3%", "4%"]],
    ["datetime(1970,1,2,0,0,0) - datetime(1970,1,1,0,0,0)", {}, 1],
    ["datetime(2010,1,21,12,0,0) | {month: month(@), day: day(@), hour: hour(@)}", {}, {"month": 1, "day": 21, "hour": 12}],
    ["2 + `true`", {}, 3],
    ["avg(\"20\")", {}, 20],
    ["left + right", {"left": 8, "right": 12 }, 20],
    ["right - left - 10", {"left": 8, "right": 12 }, -6],
    ["4 + 2 * 4", {}, 12],
    ["10 / 2 * 3", {}, 15],
    ["left & value & right", {"left": "[", "right": "]", "value": "abc" }, "[abc]"],
    ["map(&\"$\" & @, values)", {"values": [123.45, 44.32, 99.00] }, ["$123.45", "$44.32", "$99"]],
    ["foo", {"foo": "bar"}, "bar"],
    ["foo", {"foo": "value"}, "value"],
    ["bar", {"foo": "value"}, null],
    ["foo", {"foo": [0, 1, 2]}, [0, 1, 2]],
    ["'with space'", {"with space": "value"}, "value"],
    ["'special chars: !@#'", {"special chars: !@#": "value"}, "value"],
    ["'quote\\'char'", {"quote'char": "value"}, "value"],
    ["'\u2713'", {"\u2713": "value"}, "value"],
    ["bar", {"bar": "baz"}, "baz"],
    ["foo.bar", {"foo": {"bar": "value"}}, "value"],
    ["foo.'bar'", {"foo": {"bar": "value"}}, "value"],
    ["foo.bar", {"foo": {"baz": "value"}}, null],
    ["foo.bar.baz", {"foo": {"bar": {"baz": "value"}}}, "value"],
    ["foo[\"bar\"]", {"foo": {"bar": 21}}, 21],
    ["[0:4:1]", [0, 1, 2, 3], [0, 1, 2, 3]],
    ["[0:4]", [0, 1, 2, 3], [0, 1, 2, 3]],
    ["[0:3]", [0, 1, 2, 3], [0, 1, 2]],
    ["[:2]", [0, 1, 2, 3], [0, 1]],
    ["[::2]", [0, 1, 2, 3], [0, 2]],
    ["[::-1]", [0, 1, 2, 3], [3, 2, 1, 0]],
    ["[-2:]", [0, 1, 2, 3], [2, 3]],
    ["[0]", ["first", "second", "third"], "first"],
    ["[-1]", ["first", "second", "third"], "third"],
    ["[100]", ["first", "second", "third"], null],
    ["foo[0]", {"foo": ["first", "second", "third"]}, "first"],
    ["foo[100]", {"foo": ["first", "second", "third"]}, null],
    ["foo[0][0]", {"foo": [[0, 1], [1, 2]]}, 0],
    ["foo[]", {"foo": [[0, 1], [1, 2]]}, [0,1,1,2]],
    ["foo || bar", {"foo": "foo-value"}, "foo-value"],
    ["foo || bar", {"bar": "bar-value"}, "bar-value"],
    ["foo || bar", {"foo": "foo-value", "bar": "bar-value"}, "foo-value"],
    ["foo || bar", {"baz": "baz-value"}, null],
    ["foo || bar || baz", {"baz": "baz-value"}, "baz-value"],
    ["override || mylist[-1]", {"mylist": ["one", "two"]}, "two"],
    ["override || mylist[-1]", {"mylist": ["one", "two"], "override": "yes"}, "yes"],
    ["True && False", {"True": true, "False": false}, false],
    ["Number && EmptyList", {"Number": 5, "EmptyList": []}, []],
    ["foo[?a == `1` && b == `2`]", {"foo": [{"a": 1, "b": 2}, {"a": 1, "b": 3}]}, [{"a": 1, "b": 2}]],
    ["foo[?(a == 1 || b == 2) && c == 5]", {"foo": [{"a": 1, "b": 2, "c": 3}, {"a": 3, "b": 4}]}, []],
    ["!True", {"True": true}, false],
    ["!False", {"False": false}, true],
    ["!Number", {"Number": 5}, false],
    ["!EmptyList", {"EmptyList": []}, true],
    ["[foo,bar]", {"foo": "a", "bar": "b", "baz": "c"}, ["a", "b"]],
    ["[foo,bar[0]]", {"foo": "a", "bar": ["b"], "baz": "c"}, ["a", "b"]],
    ["[foo,bar.baz]", {"foo": "a", "bar": {"baz": "b"}}, ["a", "b"]],
    ["[foo,baz]", {"foo": "a", "bar": "b"}, ["a", null]],
    ["{foo: foo, bar: bar}", {"foo": "a", "bar": "b", "baz": "c"}, {"foo": "a", "bar": "b"}],
    ["{foo: foo, firstbar: bar[0]}", {"foo": "a", "bar": ["b"]}, {"foo": "a", "firstbar": "b"}],
    ["{foo: foo, 'bar.baz': bar.baz}", {"foo": "a", "bar": {"baz": "b"}}, {"foo": "a", "bar.baz": "b"}],
    ["{foo: foo, baz: baz}", {"foo": "a", "bar": "b"}, {"foo": "a", "baz": null}],
    ["[*].foo", [{"foo": 1}, {"foo": 2}, {"foo": 3}], [1, 2, 3]],
    ["[*].foo", [{"foo": 1}, {"foo": 2}, {"bar": 3}], [1, 2, null]],
    ["*.foo", {"a": {"foo": 1}, "b": {"foo": 2}, "c": {"bar": 1}}, [1, 2,null]],
    ["`\"foo\"`", {}, "foo"],
    ["`\"foo\\`bar\"`", {}, "foo`bar"],
    ["`[1, 2]`", {}, [1, 2] ],
    ["`true`", {}, true],
    ["`{\"a\": \"b\"}`.a", {}, "b"],
    ["{first: a, type: `\"mytype\"`}", {"a": "b", "c": "d"}, {"first": "b", "type": "mytype"}],
    ["`\"foo\"`", "{}", "foo"],
    ["\"foo\"", "{}", "foo"],
    ["\" bar \"", {}, " bar "],
    ["\"[baz]\"", {}, "[baz]"],
    ["\"[baz]\"", {}, "[baz]"],
    ["\"\u03a6\"", {}, "Î¦"],
    ["\"\\\\\"", {}, "\\"],
    ["44", {}, 44],
    ["[12, 13]", {}, [12, 13]],
    ["{a: 12, b: 13}", {}, {"a": 12, "b": 13}],
    ["foo | [1]", {"foo": [3,4,5]}, 4],
    ["foo | @[-1]", {"foo": [3,4,5]}, 5],
    ["foo | [1, 2]", {"foo": [3,4,5]}, [1, 2]],
    ["6 / 3", {}, 2],
    ["foo[?a < b]", {"foo": [{"a": "char", "b": "bar"}, {"a": 2, "b": 1}, {"a": 1, "b": 2}, {"a": false, "b": "1"}, {"a": 10, "b": "12"}]}, [ {"a": 1, "b": 2}, {"a": false, "b": "1"}, {"a": 10, "b": "12"} ]],
    ["foo[?a < b]", {"foo": [{"a": "char", "b": "bar"}, {"a": 2, "b": 1}, {"a": 1, "b": 2}, {"a": false, "b": "1"}, {"a": 10, "b": "12"}]}, [ {"a": 1, "b": 2}, {"a": false, "b": "1"}, {"a": 10, "b": "12"} ]],
    ["[].toNumber(@)", ["1", "2", "3", "notanumber", null, true], [1,2,3,0,null,1]],
    ["foo", {"foo": -1, "bar": "2"}, -1],
    ["bar", {"foo": -1, "bar": "2"}, "2"],
    ["foo[*].bar[0]", {"foo": [{"bar": ["first1", "second1"]}, {"bar": ["first2", "second2"]}]}, ["first1", "first2"]],
    ["foo[*].bar | [0]", {"foo": [{"bar": ["first1", "second1"]}, {"bar": ["first2", "second2"]}]}, ["first1", "second1"]],
    ["foo | bar", {"foo": {"bar": "baz"}}, "baz"],
    ["foo[*].bar | [0]", {"foo": [{"bar": ["first1", "second1"]}, {"bar": ["first2", "second2"]}]}, ["first1", "second1"]],
    ["foo | [0]", {"foo": [0, 1, 2]}, 0],
    ["value($days, weekday(datetime(date.year, date.month, date.day), 3))", {"date": {"year": 2023,"month": 9,"day": 13}}, "Wednesday"]
]